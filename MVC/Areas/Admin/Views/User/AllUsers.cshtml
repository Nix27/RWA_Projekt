@model IEnumerable<UserVM>

@{
    var page = (int)ViewData["page"];
    var size = (int)ViewData["size"];
    var pages = (int)ViewData["pages"] - 1;
}

<input id="hiddenData" data-pages="@pages" data-size="@size" data-url="UserTableBodyPartial" data-keyfilterby="userFilterBy" data-keyfilter="userFilter" data-keypage="userPage" hidden />

<div class="container p-2">
    <div class="row mt-3">
        <div class="col-6">
            <h2 class="text-primary">All Users</h2>
        </div>
        <div class="col-6 text-end">
            <a asp-area="Admin" asp-controller="User" asp-action="CreateUser" class="btn btn-primary"><i class="bi bi-plus-square"></i> &nbsp; Register New User</a>
        </div>
    </div>
    <br />

    <div class="d-flex justify-content-between">
        <div class="d-flex">
            <label for="filterBy" class="mx-3 w-100 pt-1">Filter by:</label>
            <select id="filterBy" class="form-select border border-1 border-dark pt-1 h-75">
                <option value="none" selected>None</option>
                <option value="firstname">First name</option>
                <option value="lastname">Last name</option>
                <option value="username">Username</option>
                <option value="country">Country</option>
            </select>
        </div>
        <div>
            <input type="text" id="filter" class="form-control border border-1 border-dark h-75" />
        </div>
    </div>

    <table id="tblUsers" class="table">
        <thead>
            <tr>
                <th>Username</th>
                <th>First name</th>
                <th>Last name</th>
                <th>E-mail</th>
                <th>Phone</th>
                <th>Country</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="table-body"></tbody>
        <tfoot>
            <tr>
                <td colspan="7">
                    <div class="d-flex justify-content-end">
                        <a asp-action="AllUsers" asp-route-page="0" asp-route-size="@size" data-page="0" class="first-btn btn btn-primary mx-2">First</a>
                        <a asp-action="AllUsers" asp-route-page="@(page)" asp-route-size="@size" data-page="0" class="previous-btn btn btn-primary mx-2"><</a>

                        @for (int i = 0; i <= pages; i++)
                        {
                            var btnClass = page == i ? "btn-dark" : "btn-light";
                            <a asp-action="AllUsers" asp-route-page="@i" asp-route-size="@size" data-page="@i" class="pager-btn btn @btnClass">@(i + 1)</a>
                        }

                        <a asp-action="AllUsers" asp-route-page="@(page)" asp-route-size="@size" data-page="1" class="next-btn btn btn-primary mx-2">></a>
                        <a asp-action="AllUsers" asp-route-page="@pages" asp-route-size="@size" data-page="@pages" class="last-btn btn btn-primary mx-2">Last</a>
                    </div>
                </td>
            </tr>
        </tfoot>
    </table>
</div>

@section Scripts{
    <script src="~/js/deleteWarning.js"></script>
    <script src="~/js/pagination.js"></script>
    <script src="~/js/filtering.js"></script>
}